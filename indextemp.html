<!DOCTYPE html>
<!DOCTYPE html>
<html>
<head>
	<title>Login Form</title>
</head>
<body>
            <button onclick="if(getCookie('bejelent')== 'true'){document.getElementById('login-modal').style.display='none';alert('Már belépett.');}else{document.getElementById('login-modal').style.display='block'}">Login</button>
            <div id="login-modal" class="modal">
            <div class="modal-content">
                <span onclick="document.getElementById('login-modal').style.display='none'" class="close">&times;</span>
                <h2>Login Form</h2>
                <form>
                    <input type='text' id="jelszo" placeholder="Jelszo">
                    <button onclick="bej(document.getElementById('jelszo').value)">bejelentkezes</button>
                </form>
            </div>
        </div>
        <input type="text" onchange="kereses(this.value,document.querySelector('#jatekok'))">
        <div id="jatekok" class="jatekok">
          <div id="asd">
            <img src="" alt="asd">
          </div>
        </div>
</body>
<style>
.modal {
	display: none;
	position: fixed;
	z-index: 1;
	left: 0;
	top: 0;
	width: 100%;
	height: 100%;
	overflow: auto;
	background-color: rgba(0,0,0,0.4);
}

.modal-content {
	background-color: #fefefe;
	margin: 15% auto;
	padding: 20px;
	border: 1px solid #888;
	width: 30%;
}

.close {
	color: #aaa;
	float: right;
	font-size: 28px;
	font-weight: bold;
	cursor: pointer;
}

.close:hover,
.close:focus {
	color: black;
	text-decoration: none;
	cursor: pointer;
}
</style>
<script>
    function encryptString(str, key) {
        let result = "";
        for (let i = 0; i < str.length; i++) {
          let charCode = str.charCodeAt(i);
          charCode += key;
          result += String.fromCharCode(charCode);
        }
        return result;
      }
      let originalString = "Hello, world!";
let encryptionKey = 591;
let jelszo = encryptString('alma',encryptionKey);
console.log("alma a jelszó, "+jelszo)
function kereses(v,m){
 for(let i = 0;i<m.children.length;i++){
   let temp = ''
    for(let j = 0; j < v.length;j++){
      temp += m.children[i].id[m.children[i].id.search(v[j])]
      }
   if (temp == v){
     m.children[i].style.display = 'inline';
   }
   else{
    m.children[i].style.display = 'none';
   }
 }
}
function getCookie(cname) {
  let name = cname + "=";
  let decodedCookie = decodeURIComponent(document.cookie);
  let ca = decodedCookie.split(';');
  for(let i = 0; i <ca.length; i++) {
    let c = ca[i];
    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }
    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }
  return "";
}
function bej(jel){
    if ((jel != null || jel != "" || getCookie('bejelent')== "" || getCookie('bejelent')!= true) && encryptString(jel,encryptionKey) == jelszo ){
      document.cookie = 'bejelent=true;expires=Thu, 18 Dec 2024 12:00:00 UTC';      
      alert('Sikeres belépés.')
      document.getElementById('login-modal').style.display = 'none'
    }else if((jel != null || jel != "" || getCookie('bejelent')== "" || getCookie('bejelent')== true) && encryptString(jel,encryptionKey) != jelszo ){
      alert('Hibás jelszó.')
    }    
  }
</script>
</html>
